<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting information about Members of the European Parliament • quotefinder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting information about Members of the European Parliament">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quotefinder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dockerising.html">Deploy with Docker</a>
    </li>
    <li>
      <a href="../articles/edjnetquotefinder.html">quotefinder</a>
    </li>
    <li>
      <a href="../articles/european_parliament.html">Getting information about Members of the European Parliament</a>
    </li>
    <li>
      <a href="../articles/retrieving_tweets.html">Retrieving tweets</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/edjnet/quotefinder">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting information about Members of the European Parliament</h1>
                        <h4 class="author">Giorgio Comai</h4>
            
            <h4 class="date">2019-10-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/edjnet/quotefinder/blob/master/vignettes/european_parliament.Rmd"><code>vignettes/european_parliament.Rmd</code></a></small>
      <div class="hidden name"><code>european_parliament.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(pacman)) <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"pacman"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">pacman<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span>(<span class="st">"tidyverse"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">pacman<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span>(<span class="st">"XML"</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"giocomai/castarter"</span>)</a></code></pre></div>
<p>This document outlines an approach for getting basic information about all members of the European Parliament (MEPs). The data collected will then be fed to the Quote Finder.</p>
<p>First, let’s get the list of all MEPs, provided by the European Parliament in a <a href="http://www.europarl.europa.eu/meps/en/full-list/xml">convenient xml format</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">all_MEPs &lt;-<span class="st"> </span>XML<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/XML/man/xmlToDataFrame.html">xmlToDataFrame</a></span>(<span class="dt">doc =</span> <span class="st">"http://www.europarl.europa.eu/meps/en/full-list/xml"</span>,</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">                                <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>There are the fields provided:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(all_MEPs)</a></code></pre></div>
<pre><code>## [1] "fullName"               "country"               
## [3] "politicalGroup"         "id"                    
## [5] "nationalPoliticalGroup"</code></pre>
<p>And this is how the actual data looks like:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">pander<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pander/man/pander.html">pander</a></span>(<span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(all_MEPs))</a></code></pre></div>
<table class="table">
<caption>Table continues below</caption>
<colgroup>
<col width="29%">
<col width="14%">
<col width="44%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="center">fullName</th>
<th align="center">country</th>
<th align="center">politicalGroup</th>
<th align="center">id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Magdalena ADAMOWICZ</td>
<td align="center">Poland</td>
<td align="center">Group of the European People’s Party (Christian Democrats)</td>
<td align="center">197490</td>
</tr>
<tr class="even">
<td align="center">Asim ADEMOV</td>
<td align="center">Bulgaria</td>
<td align="center">Group of the European People’s Party (Christian Democrats)</td>
<td align="center">189525</td>
</tr>
<tr class="odd">
<td align="center">Isabella ADINOLFI</td>
<td align="center">Italy</td>
<td align="center">Non-attached Members</td>
<td align="center">124831</td>
</tr>
<tr class="even">
<td align="center">Matteo ADINOLFI</td>
<td align="center">Italy</td>
<td align="center">Identity and Democracy Group</td>
<td align="center">197826</td>
</tr>
<tr class="odd">
<td align="center">Alex AGIUS SALIBA</td>
<td align="center">Malta</td>
<td align="center">Group of the Progressive Alliance of Socialists and Democrats in the European Parliament</td>
<td align="center">197403</td>
</tr>
<tr class="even">
<td align="center">Mazaly AGUILAR</td>
<td align="center">Spain</td>
<td align="center">European Conservatives and Reformists Group</td>
<td align="center">198096</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup><col width="36%"></colgroup>
<thead><tr class="header">
<th align="center">nationalPoliticalGroup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Independent</td>
</tr>
<tr class="even">
<td align="center">Citizens for European Development of Bulgaria</td>
</tr>
<tr class="odd">
<td align="center">Movimento 5 Stelle</td>
</tr>
<tr class="even">
<td align="center">Lega</td>
</tr>
<tr class="odd">
<td align="center">Partit Laburista</td>
</tr>
<tr class="even">
<td align="center">VOX</td>
</tr>
</tbody>
</table>
<p>This is useful information, but we still do not have reference to their social media accounts, which are instead given on the individual page of each of them. They can be extracted from there, even if some minor data cleaning is needed.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"castarter"</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/pkg/castarter/man/SetCastarter.html">SetCastarter</a></span>(<span class="dt">project =</span> <span class="st">"ep"</span>, <span class="dt">website =</span> <span class="st">"meps"</span>)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">index_links &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"http://www.europarl.europa.eu/meps/en/"</span>, all_MEPs<span class="op">$</span>id)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/pkg/castarter/man/CreateFolders.html">CreateFolders</a></span>()</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/pkg/castarter/man/DownloadContents.html">DownloadContents</a></span>(<span class="dt">links =</span> index_links, <span class="dt">type =</span> <span class="st">"index"</span>)</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">fullName &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/castarter/man/ExtractTitles.html">ExtractTitles</a></span>(<span class="dt">container =</span> <span class="st">"span"</span>,</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">                          <span class="dt">containerClass =</span> <span class="st">"ep_name erpl-member-card-full-member-name"</span>, <span class="dt">htmlLocation =</span> fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/path.html">path</a></span>(<span class="st">"castarter"</span>, <span class="st">"ep"</span>, <span class="st">"meps"</span>, <span class="st">"IndexHtml"</span>))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">twitter_urls &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span>(<span class="dt">.x =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span>(fullName),</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">                 <span class="dt">.f =</span> <span class="cf">function</span> (x) {</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    temp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/castarter/man/ExtractLinks.html">ExtractLinks</a></span>(<span class="dt">container =</span> <span class="st">"div"</span>,</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">                         <span class="dt">containerClass =</span> <span class="st">"ep-p_text link_twitt"</span>,</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">                         <span class="dt">id =</span> x)</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">    <span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(temp)<span class="op">==</span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">      <span class="ot">NA</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">      temp[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">    }</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">  })</a>
<a class="sourceLine" id="cb7-16" data-line-number="16"></a>
<a class="sourceLine" id="cb7-17" data-line-number="17">facebook_urls &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span>(<span class="dt">.x =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span>(fullName),</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">                 <span class="dt">.f =</span> <span class="cf">function</span> (x) {</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">    temp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/castarter/man/ExtractLinks.html">ExtractLinks</a></span>(<span class="dt">container =</span> <span class="st">"div"</span>,</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">                         <span class="dt">containerClass =</span> <span class="st">"ep-p_text link_fb"</span>,</a>
<a class="sourceLine" id="cb7-21" data-line-number="21">                         <span class="dt">id =</span> x)</a>
<a class="sourceLine" id="cb7-22" data-line-number="22">    <span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(temp)<span class="op">==</span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb7-23" data-line-number="23">      <span class="ot">NA</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb7-25" data-line-number="25">      temp[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb7-26" data-line-number="26">    }</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">  })</a>
<a class="sourceLine" id="cb7-28" data-line-number="28"></a>
<a class="sourceLine" id="cb7-29" data-line-number="29">twitter_urls &lt;-<span class="st"> </span>twitter_urls <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="st">  </span><span class="kw">str_remove</span>(<span class="dt">pattern =</span> <span class="st">"</span><span class="ch">\\</span><span class="st">?.*"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="st">  </span><span class="kw">str_replace</span>(<span class="dt">pattern =</span> <span class="st">"http://@"</span>,</a>
<a class="sourceLine" id="cb7-32" data-line-number="32">              <span class="dt">replacement =</span> <span class="st">"https://twitter.com/"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="st">  </span><span class="kw">str_replace</span>(<span class="dt">pattern =</span> <span class="st">"https://www.twitter.com/"</span>,</a>
<a class="sourceLine" id="cb7-34" data-line-number="34">              <span class="dt">replacement =</span> <span class="st">"https://twitter.com/"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="st">  </span><span class="kw">str_replace</span>(<span class="dt">pattern =</span> <span class="st">"http://www.twitter.com/"</span>,</a>
<a class="sourceLine" id="cb7-36" data-line-number="36">              <span class="dt">replacement =</span> <span class="st">"https://twitter.com/"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="st">  </span><span class="kw">str_remove</span>(<span class="dt">pattern =</span> <span class="st">"/$"</span>)</a>
<a class="sourceLine" id="cb7-38" data-line-number="38"></a>
<a class="sourceLine" id="cb7-39" data-line-number="39"></a>
<a class="sourceLine" id="cb7-40" data-line-number="40">twitter_urls[<span class="kw">str_detect</span>(<span class="dt">string =</span> twitter_urls, <span class="dt">pattern =</span> <span class="st">"www.facebook.com"</span>)<span class="op">&amp;</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(twitter_urls)<span class="op">==</span><span class="ot">FALSE</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></a></code></pre></div>
<p>Now, as it’s both more common and more practical to refer to EP groups by the shortened version of their name, we’ll need to match the long version provided on the official website with the standard short version.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">groups &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span>(<span class="op">~</span>GroupLong, <span class="op">~</span>GroupShort,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">                          <span class="st">"Group of the European People's Party (Christian Democrats)"</span>, <span class="st">"EPP"</span>,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">                          <span class="st">"Non-attached Members"</span>, <span class="st">"NA"</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">                          <span class="st">"Identity and Democracy Group"</span>, <span class="st">"ID"</span>,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">                          <span class="st">"Group of the Progressive Alliance of Socialists and Democrats in the European Parliament"</span>, <span class="st">"S&amp;D"</span>,</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">                          <span class="st">"European Conservatives and Reformists Group"</span>, <span class="st">"ECR"</span>,</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">                          <span class="st">"Group of the Greens/European Free Alliance"</span>, <span class="st">"Greens–EFA"</span>,</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">                          <span class="st">"Renew Europe Group"</span>, <span class="st">"RE"</span>,</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">                          <span class="st">"Confederal Group of the European United Left - Nordic Green Left"</span>, <span class="st">"GUE-NGL"</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb8-11" data-line-number="11"></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">pander<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pander/man/pander.html">pander</a></span>(groups)</a></code></pre></div>
<table class="table">
<colgroup>
<col width="45%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">GroupLong</th>
<th align="center">GroupShort</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Group of the European People’s Party (Christian Democrats)</td>
<td align="center">EPP</td>
</tr>
<tr class="even">
<td align="center">Non-attached Members</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">Identity and Democracy Group</td>
<td align="center">ID</td>
</tr>
<tr class="even">
<td align="center">Group of the Progressive Alliance of Socialists and Democrats in the European Parliament</td>
<td align="center">S&amp;D</td>
</tr>
<tr class="odd">
<td align="center">European Conservatives and Reformists Group</td>
<td align="center">ECR</td>
</tr>
<tr class="even">
<td align="center">Group of the Greens/European Free Alliance</td>
<td align="center">Greens–EFA</td>
</tr>
<tr class="odd">
<td align="center">Renew Europe Group</td>
<td align="center">RE</td>
</tr>
<tr class="even">
<td align="center">Confederal Group of the European United Left - Nordic Green Left</td>
<td align="center">GUE-NGL</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(groups<span class="op">$</span>GroupShort), <span class="dt">path =</span> <span class="st">"EPGroupShort.rds"</span>)</a></code></pre></div>
<p>It’s now time to combine all these data in tabular format to facilitate further use.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">all_MEPs_group_twitter &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span>all_MEPs <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw">left_join</span>(<span class="dt">y =</span> tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">twitter_urls =</span> twitter_urls,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">                               <span class="dt">faceboook_urls =</span> facebook_urls, </a>
<a class="sourceLine" id="cb10-5" data-line-number="5">                               <span class="dt">fullName =</span> fullName),</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">            <span class="dt">by =</span> <span class="st">"fullName"</span>)  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">officialURL =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"https://www.europarl.europa.eu/meps/en/"</span>, id)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">screen_name =</span> <span class="kw">str_remove</span>(<span class="dt">string =</span> twitter_urls,</a>
<a class="sourceLine" id="cb10-9" data-line-number="9">                                  <span class="dt">pattern =</span> <span class="st">"https://twitter.com/"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="st">  </span><span class="kw">left_join</span>(<span class="dt">y =</span> groups <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="st">              </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">politicalGroup=</span>GroupLong),</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">            <span class="dt">by =</span> <span class="st">"politicalGroup"</span>)</a></code></pre></div>
<p>Does this adequately capture all the MEPs who are on Twitter?</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">all_MEPs_group_twitter <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">On Twitter</span><span class="st">`</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(twitter_urls)<span class="op">==</span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">On Twitter</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">  </span>pander<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pander/man/pander.html">pander</a></span>()</a></code></pre></div>
<table class="table">
<colgroup>
<col width="18%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="center">On Twitter</th>
<th align="center">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">FALSE</td>
<td align="center">314</td>
</tr>
<tr class="even">
<td align="center">TRUE</td>
<td align="center">434</td>
</tr>
</tbody>
</table>
<p>Unfortunately, not quite: more than 300 MEPs have not included information on their Twitter account on their official page on the website of the European Parliament, perhaps preferring to give more visibility to their Facebook account or for other unknown reasons.</p>
<p>Where else would it be possible to find a complete list of MEPs on Twitter?</p>
<p>The <a href="www.epnewshub.eu/">EP’s Newshub</a> collects information from social media accounts of MEPs and other EP-related figures, but does not seem to offer anything like an actual list of accounts.</p>
<p>The press service of the European Parliament conveniently offers a <a href="https://twitter.com/EuroParlPress/lists/meps-2019-2024">Twitter list of MEPs</a> of current MEPs.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"rtweet"</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">twitter_token &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="dt">file =</span> <span class="st">"twitter_token.rds"</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="cf">if</span> (fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/file_access.html">file_exists</a></span>(<span class="st">"mep_df.rds"</span>)<span class="op">==</span><span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">  mep_df &lt;-<span class="st"> </span>rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/lists_members.html">lists_members</a></span>(<span class="dt">slug =</span> <span class="st">"meps-2019-2024"</span>,</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">                                  <span class="dt">owner_user =</span> <span class="st">"EuroParlPress"</span>,</a>
<a class="sourceLine" id="cb12-8" data-line-number="8">                                  <span class="dt">token =</span> twitter_token)</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">  <span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(<span class="dt">object =</span> mep_df, <span class="dt">file =</span> <span class="st">"mep_df"</span>)</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">  mep_df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="dt">file =</span> <span class="st">"mep_df.rds"</span>)</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">}</a></code></pre></div>
<p>The list includes 523 MEPs, including about a hundred that did not list their account on the official website of the EP. It seems likely, however, that this is not yet a complete list.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">eliflab_meps &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">"https://raw.githubusercontent.com/eliflab/European-Parliament-Open-Data/master/meps_full_list_with_twitter_accounts.csv"</span>) </a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   NAME = col_character(),
##   TWITTER_URL = col_character(),
##   SCREEN_NAME = col_character(),
##   NATIONALITY = col_character(),
##   GROUP = col_character()
## )</code></pre>
<p><a href="https://github.com/eliflab/European-Parliament-Open-Data">Eliflab</a> maintains a nicely formatted list of MEPs on Twitter, which includes the Twitter account of 748 MEPs.</p>
<p>By matching these three sources, and after some manual checks, it is possible to reach a reasonably complete and updated coverage of MEPs who are on Twitter.</p>
<div id="creating-a-list" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-list" class="anchor"></a>Creating a list</h2>
<p>While it is possible to request tweets for each user, to facilitate regular collection of tweets from a relatively large number of users such as in this case it is probably easier to create a Twitter list with all relevant users, and then ask Twitter for new tweets in that list (rather than ask ~600 times for each individual MEP).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">all_mep_handles &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">"https://raw.githubusercontent.com/giocomai/European-Parliament-Open-Data/master/meps_full_list_with_twitter_accounts.csv"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(SCREEN_NAME)<span class="op">==</span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(SCREEN_NAME) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(<span class="dt">pattern =</span> <span class="st">"@"</span>) </a>
<a class="sourceLine" id="cb15-2" data-line-number="2"></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/post_list.html">post_list</a></span>(<span class="dt">users =</span> all_mep_handles,</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">          <span class="dt">name =</span> <span class="st">"current_meps"</span>,</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">          <span class="dt">description =</span> <span class="st">"Current MEPs on Twitter"</span>,</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">          <span class="dt">token =</span> twitter_token)</a></code></pre></div>
<p>The Twitter list is now available at the following link: <a href="https://twitter.com/EdjQuoteFinder/lists/current-meps" class="uri">https://twitter.com/EdjQuoteFinder/lists/current-meps</a></p>
</div>
<div id="get-back-some-data-from-twitter" class="section level1">
<h1 class="hasAnchor">
<a href="#get-back-some-data-from-twitter" class="anchor"></a>Get back some data from Twitter</h1>
<p>The problem is that, as anyone who has been analysing twitter for a while will know, Twitter users can change their handle. And many MEPs do it, for different reasons: some add “MEP” at the end of their handle, some “EU”, some include some other reference to their political affiliation, or remove something that was ok during the campaign but does not sound serious enough once elected.</p>
<p>To facilitate consistent pairing of the MEP with a Twitter profile, it is useful to retrieve the unchangeable numeric user id that Twitter assigns to every user.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">qf_twitter_list &lt;-<span class="st"> </span>rtweet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rtweet/man/lists_members.html">lists_members</a></span>(<span class="dt">slug =</span> <span class="st">"current-meps"</span>,</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">                                         <span class="dt">owner_user =</span> <span class="st">"EDJQuoteFinder"</span>,</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">                                         <span class="dt">token =</span> twitter_token)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="kw">write_rds</span>(<span class="dt">x =</span> qf_twitter_list, <span class="dt">path =</span> <span class="st">"qf_twitter_list.rds"</span>)</a></code></pre></div>
</div>
<div id="have-all-these-data-together" class="section level1">
<h1 class="hasAnchor">
<a href="#have-all-these-data-together" class="anchor"></a>Have all these data together</h1>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">all_MEPs_eliflab &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">"https://raw.githubusercontent.com/giocomai/European-Parliament-Open-Data/master/meps_full_list_with_twitter_accounts.csv"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(NAME, TWITTER_URL, SCREEN_NAME) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">screen_name =</span> <span class="kw">str_remove</span>(SCREEN_NAME, <span class="st">"@"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">fullName =</span> NAME) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>SCREEN_NAME,<span class="op">-</span>TWITTER_URL)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   NAME = col_character(),
##   TWITTER_URL = col_character(),
##   SCREEN_NAME = col_character(),
##   NATIONALITY = col_character(),
##   GROUP = col_character()
## )</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">all_MEPs_full &lt;-<span class="st"> </span>all_MEPs_group_twitter <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>screen_name) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw">left_join</span>(all_MEPs_eliflab, <span class="dt">by =</span> <span class="st">"fullName"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="st">  </span><span class="kw">left_join</span>(qf_twitter_list <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(user_id, screen_name), <span class="dt">by =</span> <span class="st">"screen_name"</span>)</a></code></pre></div>
<p>It is now possible to store these data for reference.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds</a></span>(<span class="dt">x =</span> all_MEPs_full,</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">                 <span class="dt">path =</span> <span class="st">"all_MEPs_full.rds"</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">readr<span class="op">::</span><span class="kw"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span>(<span class="dt">x =</span> all_MEPs_full,</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">                 <span class="dt">path =</span> <span class="st">"all_MEPs_full.csv"</span>)</a></code></pre></div>
<p><a href="all_MEPs_full.csv">You can download them in csv format</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-list">Creating a list</a></li>
      <li><a href="#get-back-some-data-from-twitter">Get back some data from Twitter</a></li>
      <li><a href="#have-all-these-data-together">Have all these data together</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Giorgio Comai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
